# Copy this file to aws/ec2.env and fill in account-specific values.
# Example:
#   cp aws/ec2.env.example aws/ec2.env
#   ./aws/setup-ec2.sh aws/ec2.env

# ---------------------------
# AWS account / region
# ---------------------------
# AWS credentials should be configured via AWS CLI:
#   aws configure --profile <name>
# then set AWS_PROFILE here (or leave empty to use default env/profile chain).
AWS_PROFILE=
AWS_REGION=eu-west-2

# ---------------------------
# EC2 instance settings
# ---------------------------
INSTANCE_NAME=polyhermes-ec2
INSTANCE_TYPE=t3.micro
ROOT_VOLUME_GB=30

# Optional override. Leave empty to resolve from SSM parameter.
AMI_ID=
AMI_SSM_PARAMETER=/aws/service/canonical/ubuntu/server/22.04/stable/current/amd64/hvm/ebs-gp2/ami-id

# ---------------------------
# Network settings
# ---------------------------
# If USE_DEFAULT_VPC=true and both VPC_ID/SUBNET_ID are empty,
# script will use default VPC and an auto-assign-public-ip subnet.
USE_DEFAULT_VPC=true
VPC_ID=
SUBNET_ID=

SECURITY_GROUP_NAME=polyhermes-ec2-sg
# Optional override. Leave empty to auto-find/create by name.
SECURITY_GROUP_ID=

# Open web ports. Restrict CIDR if needed.
HTTP_CIDR=0.0.0.0/0
HTTPS_CIDR=0.0.0.0/0

# SSH is optional. SSM-only is recommended.
SSH_ENABLED=false
SSH_CIDR=
CREATE_KEY_PAIR=false
KEY_PAIR_NAME=polyhermes-eu-west-2
KEY_PAIR_SAVE_PATH=./aws

# ---------------------------
# IAM settings
# ---------------------------
IAM_ROLE_NAME=polyhermes-ec2-role
INSTANCE_PROFILE_NAME=polyhermes-ec2-profile

# ---------------------------
# Elastic IP settings
# ---------------------------
ASSIGN_ELASTIC_IP=false
# Optional existing allocation id (e.g. eipalloc-xxxx)
EIP_ALLOCATION_ID=

# ---------------------------
# App bootstrap settings
# ---------------------------
# PolyHermes repo + ref used by EC2 bootstrap script
GITHUB_REPO=Yunkai-Xiao/PolyHermes
DEPLOY_REF=main
IMAGE_TAG=latest

TZ=Europe/London
SPRING_PROFILES_ACTIVE=prod
SERVER_PORT=80
MYSQL_PORT=3307
DB_URL=jdbc:mysql://mysql:3306/polyhermes?useSSL=false&serverTimezone=UTC&characterEncoding=utf8&allowPublicKeyRetrieval=true
DB_USERNAME=root

# ---------------------------
# App secrets (dummy generated values)
# Replace before production usage.
# ---------------------------
DB_PASSWORD=6e1cc4cc235f817ed71595838db5ac7d
JWT_SECRET=c32973105f3090d215bcfe2b2a13e6891e6c3ba5d3da5edaf146ed4fffbc7586
ADMIN_RESET_PASSWORD_KEY=0bf8acf1fbf8c01100c4bbb8099cfc62
INITIAL_ADMIN_USERNAME=admin
INITIAL_ADMIN_PASSWORD=jwVXjkdgkWRChtVc+Ybo8ncE

LOG_LEVEL_ROOT=WARN
LOG_LEVEL_APP=INFO
ALLOW_PRERELEASE=false
