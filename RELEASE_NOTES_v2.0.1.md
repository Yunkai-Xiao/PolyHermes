# PolyHermes v2.0.1 Release Notes

## 📋 版本信息
- **版本号**: v2.0.1
- **发布日期**: 2026-01-28
- **基础版本**: v2.0.0

## 🎯 改动摘要

本次版本主要修复了订单状态检查、RPC 节点管理、订单金额计算等关键问题，提升了系统稳定性和用户体验。

---

## 🐛 Bug 修复

### 1. 修复订单状态检查中缓存清除导致计时重置的问题

**问题描述**：
- 订单详情为 `null` 时，缓存清除时机不当导致计时被重置
- 订单超过 60 秒后无法正常删除
- 部分卖出订单等待时间过长（之前等待 1 小时）

**修复内容**：
- ✅ 修复缓存清除时机问题，避免计时被重置
- ✅ 统一部分卖出和未成交订单的删除逻辑，都使用 60 秒重试窗口
- ✅ 删除未使用的常量 `PARTIAL_SOLD_CLEANUP_WINDOW_MS`
- ✅ 优化日志输出，区分部分卖出和未成交订单的日志信息

**影响范围**：
- `OrderStatusUpdateService.kt` - 订单状态更新服务

**提交**: 7e87965

---

### 2. 修复禁用 RPC 节点后仍被使用的问题

**问题描述**：
- 禁用 RPC 节点后，节点仍可能被系统使用
- 节点状态更新不及时

**修复内容**：
- ✅ 修复节点禁用逻辑，确保禁用后立即生效
- ✅ 优化节点状态检查机制
- ✅ 改进节点选择逻辑

**影响范围**：
- `RpcNodeService.kt` - RPC 节点服务

**提交**: dd39e59

---

### 3. 修复订单金额计算和价格范围验证问题

**问题描述**：
- 订单金额计算可能存在精度问题
- 价格范围验证逻辑不完善

**修复内容**：
- ✅ 修复订单金额计算逻辑
- ✅ 完善价格范围验证
- ✅ 优化数值计算精度处理

**影响范围**：
- `OrderSigningService.kt` - 订单签名服务

**提交**: 2b20f4b

---

### 4. 修复系统更新 API 路由和改进健康检查逻辑

**问题描述**：
- 系统更新 API 路由可能存在问题
- 健康检查逻辑需要优化

**修复内容**：
- ✅ 修复系统更新 API 路由
- ✅ 改进健康检查逻辑
- ✅ 优化错误处理

**提交**: 4aa85a9

---

### 5. 修复 Docker 构建相关问题

**问题描述**：
- 本地 Docker 构建时 `frontend/dist` 和 `backend/build` 不存在导致构建失败
- Dockerfile 中前端产物复制逻辑有问题

**修复内容**：
- ✅ 修复本地 Docker 构建时目录不存在的问题
- ✅ 修复 Dockerfile 中前端产物复制逻辑
- ✅ 优化构建流程

**影响范围**：
- `Dockerfile` - Docker 构建文件
- `deploy.sh` - 部署脚本

**提交**: 419c68c, 8889803

---

### 6. 补充缺失的多语言 key

**问题描述**：
- 部分多语言 key 缺失，导致界面显示异常

**修复内容**：
- ✅ 补充缺失的多语言 key
- ✅ 完善多语言支持

**影响范围**：
- `frontend/src/locales/` - 多语言文件

**提交**: 2efc04a

---

## 🔧 优化改进

### 优化过滤原因文案的数值显示格式

**改进内容**：
- ✅ 优化过滤原因文案的数值显示格式
- ✅ 新增日期工具函数，统一日期格式化
- ✅ 提升用户体验

**影响范围**：
- `CopyTradingFilterService.kt` - 跟单过滤服务
- `DateUtils.kt` - 日期工具类（新增）

**提交**: e115d45

---

## 📊 文件变更统计

- **修改文件数**: 10+
- **新增文件数**: 1 (DateUtils.kt)
- **新增行数**: 200+
- **删除行数**: 100+

---

## 🔄 升级建议

1. **直接部署**：无需特殊操作，直接部署即可
2. **验证订单处理**：建议验证订单状态检查是否正常工作
3. **检查 RPC 节点**：确认 RPC 节点状态管理是否正常
4. **验证订单金额**：确认订单金额计算是否正确

---

## 📝 完整提交列表

- 7e87965 - fix: 修复订单状态检查中缓存清除导致计时重置的问题
- e115d45 - refactor: 优化过滤原因文案的数值显示格式
- dd39e59 - fix: 修复禁用RPC节点后仍被使用的问题
- 2efc04a - fix: 补充缺失的多语言key
- 2b20f4b - fix: 修复订单金额计算和价格范围验证问题
- 419c68c - fix: 修复本地 Docker 构建时 frontend/dist 和 backend/build 不存在的问题
- 8889803 - fix: 修复 Dockerfile 中前端产物复制逻辑
- 4aa85a9 - fix: 修复系统更新 API 路由和改进健康检查逻辑

---

## 🙏 致谢

感谢所有贡献者和用户的支持与反馈！

